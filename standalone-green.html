<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>グループシステム部 イントラサイト</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            margin: 0;
            padding: 0;
            background: #f9fafb;
        }
        #root {
            height: 100vh;
        }
        .border-b-3 {
            border-bottom-width: 3px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icon components - 簡略化版
        const Icon = ({ children, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={props.size || 20} height={props.size || 20} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}>
                {children}
            </svg>
        );

        const IconHome = (props) => <Icon {...props}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M9 22V12h6v10"/></Icon>;
        const IconInfo = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></Icon>;
        const IconFileText = (props) => <Icon {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></Icon>;
        const IconLink = (props) => <Icon {...props}><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></Icon>;
        const IconOrganization = (props) => <Icon {...props}><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18M9 21V9"/></Icon>;
        const IconGraduationCap = (props) => <Icon {...props}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"/></Icon>;
        const IconMoreHorizontal = (props) => <Icon {...props}><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></Icon>;
        const IconMapPin = (props) => <Icon {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></Icon>;
        const IconClock = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></Icon>;
        const IconSearch = (props) => <Icon {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></Icon>;
        const IconAlertTriangle = (props) => <Icon {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4M12 17h.01"/></Icon>;
        const IconCalendar = (props) => <Icon {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><path d="M16 2v4M8 2v4M3 10h18"/></Icon>;
        const IconActivity = (props) => <Icon {...props}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></Icon>;
        const IconClipboard = (props) => <Icon {...props}><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></Icon>;
        const IconChevronDown = (props) => <Icon {...props}><path d="m6 9 6 6 6-6"/></Icon>;
        const IconExternalLink = (props) => <Icon {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><path d="M15 3h6v6M10 14L21 3"/></Icon>;
        const IconChevronRight = (props) => <Icon {...props}><path d="m9 18 6-6-6-6"/></Icon>;

        function DepartmentIntranet() {
          const [activeTab, setActiveTab] = useState("home");
          const [searchQuery, setSearchQuery] = useState("");
          const [currentTime, setCurrentTime] = useState(new Date());
          const [showLocations, setShowLocations] = useState(false);

          useEffect(() => {
            const timer = setInterval(() => {
              setCurrentTime(new Date());
            }, 1000);
            return () => clearInterval(timer);
          }, []);

          const announcements = [
            {
              id: 1,
              title: "四半期会議のお知らせ",
              date: "2025-11-15",
              content: "次回の四半期会議は11月20日14:00から会議室Aで開催されます。全員参加をお願いします。",
              author: "田中部長",
            },
            {
              id: 2,
              title: "新システム導入について",
              date: "2025-11-10",
              content: "来月から新しい文書管理システムを導入します。詳細は添付ファイルをご確認ください。",
              author: "IT部 佐藤",
            },
            {
              id: 3,
              title: "年末調整の提出期限",
              date: "2025-11-05",
              content: "年末調整書類の提出期限は12月10日です。期限厳守でお願いします。",
              author: "総務部 鈴木",
            },
          ];

          const deadlines = [
            { id: 1, title: "年末調整書類提出", date: "2026-12-10", department: "総務部" },
            { id: 2, title: "第3四半期予算申請", date: "2026-11-30", department: "経理部" },
            { id: 3, title: "業務報告書提出", date: "2026-11-25", department: "人事部" },
            { id: 4, title: "健康診断予約", date: "2026-02-05", department: "総務部" },
          ];

          const quickLinks = [
            { id: 1, title: "社活サイト", url: "http://aemlinux3.nekonet.co.jp/aem/aem.php", icon: <IconActivity size={24} />, color: "from-green-500 to-green-600" },
            { id: 2, title: "TW申請", url: "http://dominoap.nekonet.co.jp/tyo/tyo0993.nsf/MainFrame?OpenFrameSet", icon: <IconClipboard size={24} />, color: "from-emerald-500 to-emerald-600" },
            { id: 3, title: "E-learn", url: "https://clipline.jp/training/#/", icon: <IconGraduationCap size={24} />, color: "from-green-600 to-green-700" },
          ];

          const locations = [
            { id: "harumi", name: "晴海" },
            { id: "toyouchou", name: "東陽町" },
            { id: "osaka", name: "大阪" },
          ];

          const menuItems = [
            { id: "home", label: "ホーム", icon: <IconHome size={18} /> },
            { id: "announcements", label: "お知らせ", icon: <IconInfo size={18} /> },
            { id: "documents", label: "文書", icon: <IconFileText size={18} /> },
            { id: "links", label: "リンク集", icon: <IconLink size={18} /> },
            { id: "organization", label: "組織", icon: <IconOrganization size={18} /> },
            { id: "guide", label: "ガイド", icon: <IconGraduationCap size={18} /> },
            { id: "misc", label: "その他", icon: <IconMoreHorizontal size={18} /> },
          ];

          function getDaysRemaining(dateString) {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const targetDate = new Date(dateString);
            targetDate.setHours(0, 0, 0, 0);
            const diffTime = targetDate.getTime() - today.getTime();
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
          }

          function formatDate(dateString) {
            const date = new Date(dateString);
            return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;
          }

          const upcomingDeadlines = deadlines
            .filter((d) => {
              const remaining = getDaysRemaining(d.date);
              return remaining >= 0 && remaining <= 30;
            })
            .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());

          return (
            <div className="flex flex-col h-full bg-gray-50">
              {/* Header */}
              <header className="bg-gradient-to-r from-green-600 to-green-700 text-white shadow-sm">
                <div className="container mx-auto px-4 py-6">
                  <div className="flex justify-between items-center">
                    <h1 className="text-2xl font-semibold">グループシステム部 イントラサイト</h1>
                    <div className="relative">
                      <input
                        type="text"
                        placeholder="検索..."
                        className="py-2 px-4 pr-10 rounded-lg text-sm bg-white/90 text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-300 w-64"
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                      />
                      <button className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500">
                        <IconSearch size={18} />
                      </button>
                    </div>
                  </div>
                </div>
              </header>

              {/* Navigation */}
              <nav className="bg-white border-b border-gray-200 shadow-sm">
                <div className="container mx-auto">
                  <div className="flex">
                    {menuItems.map((item) => (
                      <button
                        key={item.id}
                        className={`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors ${
                          activeTab === item.id
                            ? "text-green-600 border-b-2 border-green-600 bg-green-50"
                            : "text-gray-600 hover:text-green-600 hover:bg-gray-50"
                        }`}
                        onClick={() => setActiveTab(item.id)}
                      >
                        {item.icon}
                        <span>{item.label}</span>
                      </button>
                    ))}
                    
                    <div
                      className="relative"
                      onMouseEnter={() => setShowLocations(true)}
                      onMouseLeave={() => setShowLocations(false)}
                    >
                      <button className="flex items-center gap-2 px-4 py-3 text-sm font-medium text-gray-600 hover:text-green-600 hover:bg-gray-50">
                        <IconMapPin size={18} />
                        <span>拠点</span>
                      </button>
                      {showLocations && (
                        <div className="absolute left-0 top-full mt-1 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[120px]">
                          {locations.map((loc) => (
                            <button
                              key={loc.id}
                              className="w-full text-left px-4 py-2 text-sm hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg"
                              onClick={() => {
                                setActiveTab("construction");
                                setShowLocations(false);
                              }}
                            >
                              {loc.name}
                            </button>
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              </nav>

              <div className="flex-grow flex overflow-hidden">
                {/* Sidebar */}
                <aside className="w-64 bg-white border-r border-gray-200 p-4 overflow-auto">
                  <div className="mb-6">
                    <h3 className="text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
                      <IconClock size={16} className="text-green-600" />
                      現在時刻
                    </h3>
                    <div className="text-xl font-semibold text-green-600 bg-green-50 p-3 rounded-lg">
                      {currentTime.toLocaleTimeString("ja-JP")}
                    </div>
                    <div className="text-xs text-gray-600 mt-1">
                      {currentTime.toLocaleDateString("ja-JP", {
                        year: "numeric",
                        month: "long",
                        day: "numeric",
                        weekday: "long",
                      })}
                    </div>
                  </div>

                  <div className="mb-6">
                    <h3 className="text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2">
                      <IconAlertTriangle size={16} className="text-amber-500" />
                      直近の締め切り
                    </h3>
                    <div className="space-y-2">
                      {upcomingDeadlines.slice(0, 2).map((deadline) => {
                        const daysRemaining = getDaysRemaining(deadline.date);
                        const isUrgent = daysRemaining <= 3;

                        return (
                          <div
                            key={deadline.id}
                            className={`text-xs border-l-2 pl-2 py-1.5 rounded-r ${
                              isUrgent ? "border-red-500 bg-red-50" : "border-amber-400 bg-amber-50"
                            }`}
                          >
                            <div className="font-medium text-gray-900">{deadline.title}</div>
                            <div className="mt-0.5 text-gray-600">
                              {formatDate(deadline.date)}
                              <span className={`ml-1 font-medium ${isUrgent ? "text-red-600" : "text-amber-600"}`}>
                                (あと{daysRemaining}日)
                              </span>
                            </div>
                          </div>
                        );
                      })}
                      {upcomingDeadlines.length === 0 && (
                        <p className="text-xs text-gray-500">締め切りはありません</p>
                      )}
                    </div>
                  </div>

                  <div>
                    <h3 className="text-sm font-semibold text-gray-700 mb-3">クイックリンク</h3>
                    <div className="space-y-2">
                      {quickLinks.map((link) => (
                        <a
                          key={link.id}
                          href={link.url}
                          target="_blank"
                          rel="noreferrer"
                          className="flex items-center gap-2 px-3 py-2 text-sm text-gray-700 bg-gray-50 hover:bg-green-50 hover:text-green-600 rounded-lg transition-colors"
                        >
                          {link.icon}
                          <span className="font-medium">{link.title}</span>
                        </a>
                      ))}
                    </div>
                  </div>
                </aside>

                {/* Main Content */}
                <main className="flex-grow p-6 overflow-auto">
                  {activeTab === "home" && (
                    <div className="space-y-6">
                      {/* 重要な締め切り */}
                      <div className="bg-white rounded-lg border border-gray-200 p-5">
                        <h2 className="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                          <IconAlertTriangle size={20} className="text-amber-500" />
                          重要な締め切り
                        </h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          {deadlines.slice(0, 4).map((deadline) => {
                            const daysRemaining = getDaysRemaining(deadline.date);
                            const isUrgent = daysRemaining <= 7;

                            return (
                              <div
                                key={deadline.id}
                                className="border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow"
                              >
                                <div className="flex justify-between items-start mb-2">
                                  <h3 className="font-medium text-gray-900">{deadline.title}</h3>
                                </div>
                                <div className="flex justify-between items-center text-sm">
                                  <span className="text-gray-600">{deadline.department}</span>
                                  <div className="flex items-center gap-1">
                                    <IconCalendar size={14} className="text-green-600" />
                                    <span className="font-medium">{formatDate(deadline.date)}</span>
                                    <span className={`ml-1 font-semibold ${isUrgent ? "text-red-600" : "text-gray-600"}`}>
                                      (あと{daysRemaining}日)
                                    </span>
                                  </div>
                                </div>
                              </div>
                            );
                          })}
                        </div>
                      </div>

                      {/* クイックアクセス */}
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        {quickLinks.map((link) => (
                          <a
                            key={link.id}
                            href={link.url}
                            target="_blank"
                            rel="noreferrer"
                            className="group"
                          >
                            <div className={`bg-gradient-to-br ${link.color} p-6 rounded-lg shadow-sm hover:shadow-md transition-all text-white`}>
                              <div className="flex items-center gap-3 mb-2">
                                <div className="bg-white/20 p-2 rounded-lg">
                                  {link.icon}
                                </div>
                                <h3 className="font-semibold text-lg">{link.title}</h3>
                              </div>
                              <div className="flex justify-end opacity-0 group-hover:opacity-100 transition-opacity">
                                <IconExternalLink size={16} />
                              </div>
                            </div>
                          </a>
                        ))}
                      </div>

                      {/* お知らせ */}
                      <div className="bg-white rounded-lg border border-gray-200 p-5">
                        <h2 className="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                          <IconInfo size={20} className="text-green-600" />
                          最新のお知らせ
                        </h2>
                        <div className="space-y-4">
                          {announcements.slice(0, 3).map((announcement) => (
                            <div key={announcement.id} className="border-b border-gray-100 pb-4 last:border-0">
                              <div className="flex justify-between items-start mb-2">
                                <h3 className="font-medium text-green-700">{announcement.title}</h3>
                                <span className="text-xs text-gray-500">
                                  {new Date(announcement.date).toLocaleDateString("ja-JP")}
                                </span>
                              </div>
                              <p className="text-sm text-gray-700 mb-1">{announcement.content}</p>
                              <div className="text-xs text-gray-500">投稿者: {announcement.author}</div>
                            </div>
                          ))}
                        </div>
                        <button
                          className="mt-3 text-sm text-green-600 hover:text-green-700 font-medium flex items-center gap-1"
                          onClick={() => setActiveTab("announcements")}
                        >
                          すべて見る <IconChevronRight size={14} />
                        </button>
                      </div>
                    </div>
                  )}

                  {activeTab === "announcements" && (
                    <div className="bg-white rounded-lg border border-gray-200 p-5">
                      <h2 className="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                        <IconInfo size={20} className="text-green-600" />
                        お知らせ一覧
                      </h2>
                      <div className="space-y-5">
                        {announcements.map((announcement) => (
                          <div key={announcement.id} className="border-b border-gray-100 pb-4 last:border-0">
                            <div className="flex justify-between items-start mb-2">
                              <h3 className="font-medium text-lg text-green-700">{announcement.title}</h3>
                              <span className="text-sm text-gray-500">
                                {new Date(announcement.date).toLocaleDateString("ja-JP")}
                              </span>
                            </div>
                            <p className="text-sm text-gray-700 mb-2">{announcement.content}</p>
                            <div className="text-xs text-gray-500">投稿者: {announcement.author}</div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}

                  {activeTab === "documents" && (
                    <div className="bg-white rounded-lg border border-gray-200 p-5">
                      <h2 className="text-lg font-semibold text-gray-800 mb-4">文書一覧</h2>
                      <div className="text-center py-12">
                        <IconFileText size={48} className="mx-auto text-gray-300 mb-3" />
                        <p className="text-gray-500">この機能は準備中です</p>
                      </div>
                    </div>
                  )}

                  {activeTab === "links" && (
                    <div className="bg-white rounded-lg border border-gray-200 p-5">
                      <h2 className="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
                        <IconLink size={20} className="text-green-600" />
                        リンク集
                      </h2>
                      <div className="space-y-3">
                        <a href="http://gs.nekonet.co.jp/GS_wiki/" target="_blank" rel="noreferrer" className="block p-3 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors">
                          <div className="flex items-center justify-between">
                            <div>
                              <h3 className="font-medium text-gray-900">GSうぃき</h3>
                              <p className="text-sm text-gray-600">部内Wikiポータル</p>
                            </div>
                            <IconExternalLink size={16} className="text-gray-400" />
                          </div>
                        </a>
                        <a href="https://clipline.jp/training/#/" target="_blank" rel="noreferrer" className="block p-3 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors">
                          <div className="flex items-center justify-between">
                            <div>
                              <h3 className="font-medium text-gray-900">E-learn</h3>
                              <p className="text-sm text-gray-600">オンライン学習プラットフォーム</p>
                            </div>
                            <IconExternalLink size={16} className="text-gray-400" />
                          </div>
                        </a>
                      </div>
                    </div>
                  )}

                  {(activeTab === "organization" || activeTab === "guide" || activeTab === "misc" || activeTab === "construction") && (
                    <div className="bg-white rounded-lg border border-gray-200 p-5">
                      <h2 className="text-lg font-semibold text-gray-800 mb-4">
                        {activeTab === "organization" && "組織"}
                        {activeTab === "guide" && "ガイド"}
                        {activeTab === "misc" && "その他"}
                        {activeTab === "construction" && "拠点別情報"}
                      </h2>
                      <div className="text-center py-12">
                        <p className="text-gray-500">この機能は準備中です</p>
                      </div>
                    </div>
                  )}
                </main>
              </div>

              {/* Footer */}
              <footer className="bg-white border-t border-gray-200 py-4">
                <div className="container mx-auto px-4 text-center">
                  <p className="text-xs text-gray-500">© 2024 システム開発部門</p>
                </div>
              </footer>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DepartmentIntranet />);
    </script>
</body>
</html>
